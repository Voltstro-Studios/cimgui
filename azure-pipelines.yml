trigger:
- master

variables:
  freetypeVersion: '2-11-1'

pool:
  vmImage: windows-2022

steps:
- script: git clone --depth 1 --branch VER-$(freetypeVersion) https://gitlab.freedesktop.org/freetype/freetype.git
  displayName: FreeType Checkout

- script: cmake -B build -D BUILD_SHARED_LIBS=true -D CMAKE_BUILD_TYPE=Release -D FT_DISABLE_HARFBUZZ=TRUE -D FT_DISABLE_BROTLI=TRUE
  displayName: FreeType CMake Setup
  workingDirectory: freetype/

- script: cmake --build build --config Release
  displayName: FreeType CMake Build
  workingDirectory: freetype/

- script: cmake --build build --config Release --target install
  displayName: FreeType CMake Install
  workingDirectory: freetype/

- checkout: self
  displayName: cimgui Checkout
  path: cimgui

- script: cmake -B build
  displayName: cimgui CMake Setup

- script: cmake --build build --config Release
  displayName: cimgui CMake Build